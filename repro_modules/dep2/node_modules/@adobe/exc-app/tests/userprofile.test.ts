/*************************************************************************
 * Copyright 2020 Adobe
 * All Rights Reserved.
 *
 * NOTICE: Adobe permits you to use, modify, and distribute this file in
 * accordance with the terms of the Adobe license agreement accompanying
 * it. If you have received this file from a source other than Adobe,
 * then your use, modification, or distribution of it requires the prior
 * written permission of Adobe.
 **************************************************************************/
import Global, {Modules} from '../src/Global';
import userProfile from '../userprofile';

describe('userProfile', () => {
  beforeEach(() => {
    (Global['exc-module-runtime'] as Modules) = {
      userProfile: {
        setButtons: (buttons) => {
          console.log(buttons); // eslint-disable-line no-console
        }
      }
    } as Modules;
  });

  it('correctly sets up the connection with module-runtime', () => {
    const setButtons = jest.spyOn(Global['exc-module-runtime'].userProfile, 'setButtons');
    const callbackFn = jest.fn();
    userProfile.setButtons([{callback: callbackFn, id: 'idx', label: 'myButton'}]);
    expect(setButtons).toBeCalledTimes(1);
  });
});
